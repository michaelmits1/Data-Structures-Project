void read_csv(Region regions[],const string& filename) {
    int i=0;
    ifstream file(filename);
    string line;

    if (!file.is_open()) {
        cerr << "Failed to open file: " << filename << endl;
        return ;
    }

    // Read each line from the file
    while (getline(file, line)) {
        string linecopy=line;
        stringstream ss(line);
        string period, event_death, region,region2, cnt_str;

        // Parse the line
        if (getline(ss, period, ',') && 
            getline(ss, event_death, ',') && 
            getline(ss, region, ',') && 
            getline(ss, cnt_str, ',')) {
            // Handle quoted region name (same as before)

            Region r;
            r.period = period;
            r.event = (event_death == "Births");
            r.region = region;

            // Convert cnt_str to integer (with error handling)
            try {
                r.cnt = stoi(cnt_str);
            } catch (const std::invalid_argument& e) {
                cerr << "Invalid line " <<  endl;
                continue; // Skip this line and continue to the next one
            }
             regions[i++]=r;
            
        }
        else{
            stringstream sss(linecopy);
            getline(sss, period, ',') ;
            getline(sss, event_death, ',') ; 
            getline(sss, region, ',');
             Region r;
            r.period = period;
            r.event = (event_death == "events");
            r.region = region;
           
            getline(file, line);
            stringstream s(line);
            getline(s, region2, ','); // Read the region within quotes
            getline(s, cnt_str, ',');
           r.region.append(" ");
           r.region.append(region2);

            // Convert cnt_str to integer (with error handling)
            try {
                r.cnt = stoi(cnt_str);
            } catch (const std::invalid_argument& e) {
                cerr << "Invalid cnt value: " << cnt_str << endl;
                continue; // Skip this line and continue to the next one
            }
             regions[i++]=r;
        }
       
    }

    file.close();
}